<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="admin/mainTemplate">
<head>
  <object th:include="admin/fragments/head :: bootstrap_table" th:remove="tag" />
</head>
<body>
<section layout:fragment="content">
        <!--/*@thymesVar id="client" type="ua.com.foxminded.accountingsystem.model.Client"*/-->
        <form th:action="@{/admin/clients}" th:object="${client}" th:method="post">
          <input type="hidden" th:field="${client.id}"/>
          <input type="hidden" th:field="${client.orders}"/>

          <label>First Name</label>
          <textarea rows="1" class="form-control" th:field="${client.firstName}" th:text="${client.firstName}"/>

          <label>Last Name</label>
          <textarea rows="1" class="form-control" th:field="${client.lastName}" th:text="${client.lastName}"/>

          <button type="submit" id="submit" class="btn btn-primary">Save</button>
          <a th:href="@{/admin/orders/new?clientId={id} (id=${client.id})}" type="submit" class="btn btn-primary">Add
            new Order</a>
        </form>

        <form th:action="@{/admin/clients/{id}(id=${client.id})}" th:method="delete">
          <button type="submit" class="btn btn-danger">delete</button>
        </form>

        <div class="display-grid">
        <form th:object="${client}">
          <label>Orders:</label>
          <table data-toggle="table">
            <thead>
            <tr>
              <th>id</th>
              <th>Service</th>
              <th>order Status</th>
              <th>open Date</th>
              <th>queuing Date</th>
              <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="order : ${client.orders}">
              <td>
                <p th:text="${order.id}">id</p>
              </td>
              <!--/*@thymesVar ordersrder" type="ua.com.foxminded.accountingsystem.model.Order"*/-->
              <td th:text="${order.service != null} ? ${order.service.name} : 'order'"></td>
              <td th:text="${order.status}"></td>
              <td th:text="${order.openDate != null} ? ${#temporals.format(order.openDate, 'dd-MMM-yyyy')} : ''"></td>
              <td
                th:text="${order.queuingDate != null} ? ${#temporals.format(order.queuingDate, 'dd-MMM-yyyy')} : ''"></td>
              <td>
                <a th:href="@{/admin/orders/{id}(id=${order.id})}">Update</a>
              </td>
            </tr>
            </tbody>
          </table>
        </form>
        </div>
        <br/>
        <div class="display-grid">
          <label>Balance:</label>
          <table data-toggle="table">
            <thead>
            <tr>
              <th>id</th>
              <th>Currency</th>
              <th>Amount</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="money : ${client.personalAccount != null} ? ${client.personalAccount.money}">
              <td th:text="${client.personalAccount.id}"></td>
              <td th:text="${money.currency}"></td>
              <td th:text="${money.price}"></td>
            </tr>
            </tbody>
          </table>
        </div>
        <br/>
        <br/>
</section>
</body>
</html>
